<!DOCTYPE html>
<html>
	<head>
		<title> CSCI 572 HW3 Page Ranking Comparison </title>
		<meta name="viewport" content="width=device-width">
		<meta charset="utf-8">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
		 <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.0/jquery.validate.min.js"></script>
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/css/bootstrapValidator.min.css">
	
		<script type="text/javascript">
			$(document).ready(function() {
				$('#searchId').submit(function(event){
					event.preventDefault();
					alert("hi");
					$.ajax( {
						 	url : 'http://localhost/QueryProcessor.php' ,
							type : 'GET',
							data : { searchQuery : $('#textSearchQueryId').val() },
							contentType:'json',
							success: function(output) {
								alert("done"+output);
								obj = JSON.parse(output);
								var arr = Object.keys(obj).map(function (key) {return obj[key]});
								alert(arr.length);
								var link = 0;
								var title = 1;
								var size = 2;
								var baseIndex = 1;
								var chunkSize = 3;
								var text="<br></br>";
								var findPath = "/home/pradeep/solr-5.3.1/example/PagesDownloaded";
								var replacePath = "http://localhost/PagesDownloaded";
								text += "<center>";
								text += "<table class='table table-striped'>";
								text += "<tbody>";
									text += "<tr>";
										text += "<th> S.No </th>";
										text += "<th> Page Link </th>";
										text += "<th> Title </th>";
										text += "<th> Page Size </th>";
									text += "</tr>";
								for(var i=baseIndex; i < arr.length; i+=chunkSize){
									//alert(typeof(arr[i+link]));
									text += "<tr>";
										text += "<td> "+(((i-baseIndex) / chunkSize )+1) +" </td>";
										text += "<td >"+
													" <a href='"+(arr[i+link]).replace(findPath,replacePath)+"' target='_blank'>"+				
													" Page"+ (((i-baseIndex) / chunkSize )+1)+" </a></td>";
										//text += "<td > <a href='http://www.google.com'> Page"+ (((i-baseIndex) / chunkSize )+1)+" </a></td>"
																
										text += "<td> " +arr[i+title]+" </td>";
										text += "<td> "+ arr[i+size]+" </td>";
									text += "</tr>";								
								} 
								text += "</tbody> </table> </center>";

								document.getElementById('ResponseId').innerHTML = text;

							},
							error: function() {
								alert("failure");
							}
						}); 
				
					});
			});
		</script>	
	</head>

	<body>
		<div class='QueryProcessing' style="border: 1px solid; width:40vw; margin-left:20vw;" align="center">
   		<form role="form" class="form-inline" id="searchId" onsubmit="return false;"> 
				<div class="form-group">
					<label for="textSearchQueryId" class="control-label" style="color:#E5A97D;"> Search Word: * </label>
					<input id ="textSearchQueryId" class="form-control" type="text" name="textSearchQueryName" rows="1" 
									style="overflow:hidden;" value="">
					<t/><t/>
				</div>
				<div class="form-group form-inline">
					<input type="submit" style="margin-left:10vh; background-color:#E5A97D;" class="btn btn-primary form-control" value="Search" /> 
				</div>
			</form>	
			<br/><br/>
		</div>
		
		<div id="ResponseId">
		</div>

		<script type="text/javascript">
    		document.getElementById('textSearchQueryId').value ='';
			document.getElementById('ResponseId').innerHTML = '';
		</script>

		<noscript>
	</body>
</html>
